{"remainingRequest":"/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/node_modules/babel-loader/lib/index.js!/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/node_modules/eslint-loader/index.js??ref--13-0!/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/src/store/auth.js","dependencies":[{"path":"/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/src/store/auth.js","mtime":1635940085880},{"path":"/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/node_modules/cache-loader/dist/cjs.js","mtime":1635871043057},{"path":"/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/node_modules/babel-loader/lib/index.js","mtime":1635871134868},{"path":"/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/node_modules/eslint-loader/index.js","mtime":1635871044496}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9hbmFpc3B1aWcvRGVza3RvcC9FVE5BL0JhY2hlbG9yL2pzL0Zyb250L3YyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwp2YXIgdXJsID0gImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvIjsKdmFyIHVzZXJzID0gewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHsKICAgIGF1dGg6IHRydWUsCiAgICByb2xlOiBbInNlbGxlciJdLAogICAgdXNlcm5hbWU6ICIiCiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNJR05JTjogZnVuY3Rpb24gU0lHTklOKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHZhciB1c2VyID0gewogICAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lLAogICAgICAgIGVtYWlsOiBwYXlsb2FkLmVtYWlsLAogICAgICAgIHJvbGU6IHBheWxvYWQucm9sZSwKICAgICAgICBpZDogcGF5bG9hZC5pZAogICAgICB9OwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlciIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgICAgc3RhdGUucm9sZSA9IHBheWxvYWQucm9sZTsKICAgICAgc3RhdGUudXNlcm5hbWUgPSBwYXlsb2FkLnVzZXJuYW1lOwogICAgICBzdGF0ZS5pZCA9IHBheWxvYWQuaWQ7CiAgICAgIHN0YXRlLmF1dGggPSB0cnVlOwogICAgfSwKICAgIExPR09VVDogZnVuY3Rpb24gTE9HT1VUKHN0YXRlKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICBzdGF0ZS5hdXRoID0gZmFsc2U7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cChfcmVmLCBwYXlsb2FkKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KHVybCArICJzaWdudXAiLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgY29tbWl0KCJTSUdOVVAiLCByZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKCiAgICAgICAgICAgICAgICBfdGhpcy4kc25vdGlmeS5lcnJvcigiSW52YWxpZCBVc2VybmFtZSBvciBQYXNzd29yZCIpOwoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgOF1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2lnbmluOiBmdW5jdGlvbiBzaWduaW4oX3JlZjIsIHBheWxvYWQpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgY29tbWl0LCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsICsgInNpZ25pbiIsIHBheWxvYWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAgICAgICBjb21taXQoIlNJR05JTiIsIHJlcy5kYXRhKTsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDg7CiAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRzbm90aWZ5LmVycm9yKCJJbnZhbGlkIFVzZXJuYW1lIG9yIFBhc3N3b3JkIik7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX2NvbnRleHQyLnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1sxLCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICBjb21taXQoIkxPR09VVCIpOwogICAgfQogIH0KfTsKZXhwb3J0IGRlZmF1bHQgdXNlcnM7"},{"version":3,"sources":["/Users/anaispuig/Desktop/ETNA/Bachelor/js/Front/v2/src/store/auth.js"],"names":["axios","url","users","namespaced","state","auth","role","username","mutations","SIGNIN","payload","user","email","id","localStorage","setItem","JSON","stringify","LOGOUT","clear","actions","signup","commit","post","then","res","response","console","log","$snotify","error","signin","data","logout"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAMC,GAAG,GAAG,4BAAZ;AAEA,IAAMC,KAAK,GAAG;AACZC,EAAAA,UAAU,EAAE,IADA;AAEZC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAE,IADD;AAELC,IAAAA,IAAI,EAAE,CAAC,QAAD,CAFD;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAFK;AAQZC,EAAAA,SAAS,EAAE;AACTC,IAAAA,MADS,kBACFL,KADE,EACKM,OADL,EACc;AACrB,UAAMC,IAAI,GAAG;AACXJ,QAAAA,QAAQ,EAAEG,OAAO,CAACH,QADP;AAEXK,QAAAA,KAAK,EAAEF,OAAO,CAACE,KAFJ;AAGXN,QAAAA,IAAI,EAAEI,OAAO,CAACJ,IAHH;AAIXO,QAAAA,EAAE,EAAEH,OAAO,CAACG;AAJD,OAAb;AAMAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,IAAf,CAA7B;AACAP,MAAAA,KAAK,CAACE,IAAN,GAAaI,OAAO,CAACJ,IAArB;AACAF,MAAAA,KAAK,CAACG,QAAN,GAAiBG,OAAO,CAACH,QAAzB;AACAH,MAAAA,KAAK,CAACS,EAAN,GAAWH,OAAO,CAACG,EAAnB;AACAT,MAAAA,KAAK,CAACC,IAAN,GAAa,IAAb;AACD,KAbQ;AAcTa,IAAAA,MAdS,kBAcFd,KAdE,EAcK;AACZU,MAAAA,YAAY,CAACK,KAAb;AACAf,MAAAA,KAAK,CAACC,IAAN,GAAa,KAAb;AACD;AAjBQ,GARC;AA2BZe,EAAAA,OAAO,EAAE;AACDC,IAAAA,MADC,wBACkBX,OADlB,EAC2B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnBY,gBAAAA,MAAmB,QAAnBA,MAAmB;AAAA;AAAA;AAAA,uBAEPtB,KAAK,CACzBuB,IADoB,CACftB,GAAG,GAAG,QADS,EACCS,OADD,EAEpBc,IAFoB,CAEf,UAACC,GAAD,EAAS;AACbH,kBAAAA,MAAM,CAAC,QAAD,EAAWI,QAAX,CAAN;AACAC,kBAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,iBALoB,CAFO;;AAAA;AAExBC,gBAAAA,QAFwB;AAQ9BC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAR8B;AAAA;;AAAA;AAAA;AAAA;;AAU9B,gBAAA,KAAI,CAACG,QAAL,CAAcC,KAAd,CAAoB,8BAApB;;AACAH,gBAAAA,OAAO,CAACC,GAAR;;AAX8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAajC,KAdM;AAgBDG,IAAAA,MAhBC,yBAgBkBrB,OAhBlB,EAgB2B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAnBY,gBAAAA,MAAmB,SAAnBA,MAAmB;AAAA;AAAA;AAAA,uBAEPtB,KAAK,CACzBuB,IADoB,CACftB,GAAG,GAAG,QADS,EACCS,OADD,EAEpBc,IAFoB,CAEf,UAACC,GAAD,EAAS;AACbH,kBAAAA,MAAM,CAAC,QAAD,EAAWG,GAAG,CAACO,IAAf,CAAN;AACAL,kBAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACD,iBALoB,CAFO;;AAAA;AAExBC,gBAAAA,QAFwB;AAQ9BC,gBAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAR8B;AAAA;;AAAA;AAAA;AAAA;;AAU9B,gBAAA,MAAI,CAACG,QAAL,CAAcC,KAAd,CAAoB,8BAApB;;AACAH,gBAAAA,OAAO,CAACC,GAAR;;AAX8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAajC,KA7BM;AA8BPK,IAAAA,MA9BO,yBA8BY;AAAA,UAAVX,MAAU,SAAVA,MAAU;AACjBA,MAAAA,MAAM,CAAC,QAAD,CAAN;AACD;AAhCM;AA3BG,CAAd;AA8DA,eAAepB,KAAf","sourcesContent":["import axios from \"axios\";\nconst url = \"http://localhost:3000/api/\";\n\nconst users = {\n  namespaced: true,\n  state: {\n    auth: true,\n    role: [\"seller\"],\n    username: \"\",\n  },\n\n  mutations: {\n    SIGNIN(state, payload) {\n      const user = {\n        username: payload.username,\n        email: payload.email,\n        role: payload.role,\n        id: payload.id,\n      };\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      state.role = payload.role;\n      state.username = payload.username;\n      state.id = payload.id;\n      state.auth = true;\n    },\n    LOGOUT(state) {\n      localStorage.clear();\n      state.auth = false;\n    },\n  },\n  actions: {\n    async signup({ commit }, payload) {\n      try {\n        const response = await axios\n          .post(url + \"signup\", payload)\n          .then((res) => {\n            commit(\"SIGNUP\", response);\n            console.log(res);\n          });\n        console.log(response);\n      } catch (err) {\n        this.$snotify.error(\"Invalid Username or Password\");\n        console.log(err);\n      }\n    },\n\n    async signin({ commit }, payload) {\n      try {\n        const response = await axios\n          .post(url + \"signin\", payload)\n          .then((res) => {\n            commit(\"SIGNIN\", res.data);\n            console.log(res);\n          });\n        console.log(response);\n      } catch (err) {\n        this.$snotify.error(\"Invalid Username or Password\");\n        console.log(err);\n      }\n    },\n    logout({ commit }) {\n      commit(\"LOGOUT\");\n    },\n  },\n};\nexport default users;\n"]}]}